define("canvax/event/touchHandler",["canvax/core/Base","canvax/library/hammer"],function(a,b){var c=function(){};return c.prototype={init:function(){var a=0,c=this,d=c.canvax,e=d.el;c._hammer=b(e).on(b.EventsTypes,function(b){if(d.updateRootOffset(),"drag"==b.type){if(1>a)return void a++;a=0}c.__touchHandler(b)})},__touchHandler:function(a){var b=this,c=b.canvax;if(this.preventDefault?this._hammer.options.prevent_default=!0:this._hammer.options.prevent_default=!1,b.curPoints=b.__getCanvaxPointInTouchs(a),"release"==a.type)b.__dispatchEventInChilds(a,b.curPointsTarget)||b.__dispatchEventInChilds(a,[c]);else{"dragstart"==a.type&&_.each(b.curPointsTarget,function(a,c){return a&&a.dragEnabled?(b._draging=!0,b._clone2hoverStage(a,c),a.context.visible=!1,!1):void 0}),"drag"==a.type&&b._draging&&_.each(b.curPointsTarget,function(c,d){c&&c.dragEnabled&&b._dragHander(a,c,d)}),"dragend"==a.type&&b._draging&&(_.each(b.curPointsTarget,function(c,d){c&&c.dragEnabled&&b._dragEnd(a,c,0)}),b._draging=!1);var d=b.__getChildInTouchs(b.curPoints);b.__dispatchEventInChilds(a,d)?"touch"==a.type&&(b.curPointsTarget=d):b.__dispatchEventInChilds(a,[c])}},__getCanvaxPointInTouchs:function(a){var b=this,c=b.canvax,d=[];return _.each(a.gesture.touches,function(a){a.x=a.pageX-c.rootOffset.left,a.y=a.pageY-c.rootOffset.top,d.push(a)}),d},__getChildInTouchs:function(a){var b=this,c=b.canvax,d=[];return _.each(a,function(a){d.push(c.getObjectsUnderPoint(a,1)[0])}),d}},c});