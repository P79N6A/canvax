define("canvax/event/EventHandler",["canvax/core/Base","ontouchstart"in window?"canvax/event/touchHandler":"canvax/event/mouseHandler","canvax/display/Point","canvax/event/CanvaxEvent"],function(a,b,c,d){var e=function(a){this.canvax=a,this.curPoints=[new c(0,0)],this.curPointsTarget=[],this._touching=!1,this._draging=!1,this._cursor="default"};return a.creatClass(e,b,{__dispatchEventInChilds:function(b,c){if(!(c||"length"in c))return!1;var e=this,f=!1;return _.each(c,function(c,g){if(c){f=!0;var h=a.copyEvent(new d,b);h.target=h.currentTarget=c||this,h.stagePoint=e.curPoints[g],h.point=h.target.globalToLocal(h.stagePoint),c.dispatchEvent(h)}}),f},_clone2hoverStage:function(a,b){var c=this,d=(c.canvax,canvax._hoverStage.getChildById(a.id));d||(d=a.clone(!0),d._transform=a.getConcatenatedMatrix(),canvax._hoverStage.addChildAt(d,0)),d.context.visible=!0,d._dragPoint=a.globalToLocal(c.curPoints[b])},_dragHander:function(a,b,d){var e=this,f=(e.canvax,canvax._hoverStage.getChildById(b.id)),g=new c(e.curPoints[d].x-f._dragPoint.x,e.curPoints[d].y-f._dragPoint.y);f.context.x=g.x,f.context.y=g.y,b.drag&&b.drag(a);var h=g;"stage"!=b.type&&b.parent&&"stage"!=b.parent.type&&(h=b.parent.globalToLocal(g)),b._notWatch=!0,b.context.x=h.x,b.context.y=h.y,b._notWatch=!1},_dragEnd:function(a,b,c){var d=this,e=d.canvax,f=e._hoverStage.getChildById(b.id);b.context.visible=!0,("mouseout"==a.type||"dragend"==a.type)&&f.destroy()}}),e});