KISSY.add("canvax/core/PropertyFactory",function(a,b){function c(a,d,e){function g(a,f){(!unwatchOne[a]||unwatchOne[a]&&"$"!==a.charAt(0))&&(d[a]=f);var g=b.getType(f);if("function"===g)unwatchOne[a]||l.push(a);else{if(-1!==_.indexOf(i,a)||"$"===a.charAt(0)&&!e[a])return l.push(a);var m=function(e){var f,i=m.value,k=i;if(!arguments.length)return"object"!==g||i.$model||(i.$parent=j,i=c(i,i),m.value=i),i;var l=b.getType(e);if(!h&&i!==e){"object"===l?(i=e.$model?e:c(e,e),f=i.$model):i=e,m.value=i,d[a]=f?f:i,f||j.$fire&&j.$fire(a,i,k),g!=l&&(g=l);var n=j;if(!j.$watch)for(;n.$parent;)n=n.$parent;n.$watch&&n.$watch.call(n,a,i,k)}};m.value=f,k[a]={set:m,get:m,enumerable:!0}}}var h=!0,i=a.$skipArray,j={},k={},l=_.keys(unwatchOne);d=d||{},e=e||{},i=_.isArray(i)?i.concat(l):l;for(var m in a)g(m,a[m]);return j=f(j,k,l),_.forEach(l,function(b){a[b]&&(j[b]="function"==typeof a[b]?function(){a[b].apply(this,arguments)}:a[b])}),j.$model=d,j.$accessor=k,j.hasOwnProperty=function(a){return a in j.$model},h=!1,j}function d(a,b,c){var d=a[b]&&a[b].set;return 3!==arguments.length?d():(d(c),void 0)}unwatchOne={$skipArray:0,$watch:1,$fire:2,$model:3,$accessor:4,$owner:5,$parent:7};var e=Object.defineProperty;try{e({},"_",{value:"x"});var f=Object.defineProperties}catch(g){"__defineGetter__"in Object&&(e=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},f=function(a,b){for(var c in b)b.hasOwnProperty(c)&&e(a,c,b[c]);return a})}return!f&&window.VBArray&&(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),f=function(a,b,c){a=c.slice(0),a.push("hasOwnProperty");var e="VBClass"+setTimeout("1"),f={},g=[];g.push("Class "+e,"	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function"),_.forEach(a,function(a){f[a]!==!0&&(f[a]=!0,g.push("	Public ["+a+"]"))});for(var h in b)f[h]=!0,g.push("	Public Property Let ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Set ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Get ["+h+"]","	On Error Resume Next","		Set["+h+'] = [__proxy__]([__data__],"'+h+'")',"	If Err.Number <> 0 Then","		["+h+'] = [__proxy__]([__data__],"'+h+'")',"	End If","	On Error Goto 0","	End Property");return g.push("End Class"),g.push("Function "+e+"Factory(a, b)","	Dim o","	Set o = (New "+e+")(a, b)","	Set "+e+"Factory = o","End Function"),window.parseVB(g.join("\r\n")),window[e+"Factory"](b,d)}),window.PropertyFactory=c,c},{requires:["canvax/core/Base"]});