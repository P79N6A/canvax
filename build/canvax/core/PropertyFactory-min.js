define("canvax/core/PropertyFactory",[],function(a){function b(a,c,d){function g(a,g){(!f[a]||f[a]&&"$"!==a.charAt(0))&&(c[a]=g);var h=e(g);if("function"===h)f[a]||m.push(a);else{if(-1!==_.indexOf(j,a)||"$"===a.charAt(0)&&!d[a])return m.push(a);var n,o;if("object"===h&&"function"==typeof g.get&&_.keys(g).length<=2){var p=g.set,q=g.get;n=function(b){var d=n.value,e=d;return arguments.length?void(i||("function"==typeof p&&p.call(k,b),o!==b&&(o=b,d=n.value=c[a]=b,k.$fire&&k.$fire(a,d,e)))):(b=n.value=c[a]=q.call(k),d!==b&&(o=void 0,k.$fire&&k.$fire(a,b,d)),b)}}else n=function(d){var f,g=n.value,j=g;if(!arguments.length)return"object"!==h||g.$model||(g.$parent=k,g=b(g,g),n.value=g),g;var l=e(d);if(!i&&g!==d){"object"===l?(g=d.$model?d:b(d,d),f=g.$model):g=d,n.value=g,c[a]=f?f:g,f||k.$fire&&k.$fire(a,g,j),h!=l&&(h=l);var m=k;if(!k.$watch)for(;m.$parent;)m=m.$parent;m.$watch&&m.$watch.call(m,a,g,j)}},n.value=g;l[a]={set:n,get:n,enumerable:!0}}}var i=!0,j=a.$skipArray,k={},l={},m=_.keys(f);c=c||{},d=d||{},j=_.isArray(j)?j.concat(m):m;for(var n in a)g(n,a[n]);return k=h(k,l,m),_.forEach(m,function(b){a[b]&&("function"==typeof a[b]?k[b]=function(){a[b].apply(this,arguments)}:k[b]=a[b])}),k.$model=c,k.$accessor=l,k.hasOwnProperty=function(a){return a in k.$model},i=!1,k}function c(a,b,c){var d=a[b]&&a[b].set;return 3!==arguments.length?d():void d(c)}var d={};"Boolean Number String Function Array Date RegExp Object Error".replace(/[^, ]+/g,function(a){d["[object "+a+"]"]=a.toLowerCase()});var e=function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?d[Object.prototype.toString.call(a)]||"object":typeof a},f={$skipArray:0,$watch:1,$fire:2,$model:3,$accessor:4,$owner:5,$parent:7},g=Object.defineProperty;try{g({},"_",{value:"x"});var h=Object.defineProperties}catch(i){"__defineGetter__"in Object&&(g=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},h=function(a,b){for(var c in b)b.hasOwnProperty(c)&&g(a,c,b[c]);return a})}return!h&&window.VBArray&&(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),h=function(a,b,d){a=d.slice(0),a.push("hasOwnProperty");var e="VBClass"+setTimeout("1"),f={},g=[];g.push("Class "+e,"	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function"),_.forEach(a,function(a){f[a]!==!0&&(f[a]=!0,g.push("	Public ["+a+"]"))});for(var h in b)f[h]=!0,g.push("	Public Property Let ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Set ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Get ["+h+"]","	On Error Resume Next","		Set["+h+'] = [__proxy__]([__data__],"'+h+'")',"	If Err.Number <> 0 Then","		["+h+'] = [__proxy__]([__data__],"'+h+'")',"	End If","	On Error Goto 0","	End Property");return g.push("End Class"),g.push("Function "+e+"Factory(a, b)","	Dim o","	Set o = (New "+e+")(a, b)","	Set "+e+"Factory = o","End Function"),window.parseVB(g.join("\r\n")),window[e+"Factory"](b,c)}),window.PropertyFactory=b,b});