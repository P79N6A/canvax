define("canvax/core/PropertyFactory",[],function(){function a(b,c,f){function h(b,g){(!e[b]||e[b]&&"$"!==b.charAt(0))&&(c[b]=g);var h=d(g);if("function"===h)e[b]||m.push(b);else{if(-1!==_.indexOf(j,b)||"$"===b.charAt(0)&&!f[b])return m.push(b);var n,o;if("object"===h&&"function"==typeof g.get&&_.keys(g).length<=2){var p=g.set,q=g.get;n=function(a){var d=n.value,e=d;return arguments.length?(i||("function"==typeof p&&p.call(k,a),o!==a&&(o=a,d=n.value=c[b]=a,k.$fire&&k.$fire(b,d,e))),void 0):(a=n.value=c[b]=q.call(k),d!==a&&(o=void 0,k.$fire&&k.$fire(b,a,d)),a)}}else n=function(e){var f,g=n.value,j=g;if(!arguments.length)return"object"!==h||g.$model||(g.$parent=k,g=a(g,g),n.value=g),g;var l=d(e);if(!i&&g!==e){"object"===l?(g=e.$model?e:a(e,e),f=g.$model):g=e,n.value=g,c[b]=f?f:g,f||k.$fire&&k.$fire(b,g,j),h!=l&&(h=l);var m=k;if(!k.$watch)for(;m.$parent;)m=m.$parent;m.$watch&&m.$watch.call(m,b,g,j)}},n.value=g;l[b]={set:n,get:n,enumerable:!0}}}var i=!0,j=b.$skipArray,k={},l={},m=_.keys(e);c=c||{},f=f||{},j=_.isArray(j)?j.concat(m):m;for(var n in b)h(n,b[n]);return k=g(k,l,m),_.forEach(m,function(a){b[a]&&(k[a]="function"==typeof b[a]?function(){b[a].apply(this,arguments)}:b[a])}),k.$model=c,k.$accessor=l,k.hasOwnProperty=function(a){return a in k.$model},i=!1,k}function b(a,b,c){var d=a[b]&&a[b].set;return 3!==arguments.length?d():(d(c),void 0)}var c={};"Boolean Number String Function Array Date RegExp Object Error".replace(/[^, ]+/g,function(a){c["[object "+a+"]"]=a.toLowerCase()});var d=function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?c[Object.prototype.toString.call(a)]||"object":typeof a},e={$skipArray:0,$watch:1,$fire:2,$model:3,$accessor:4,$owner:5,$parent:7},f=Object.defineProperty;try{f({},"_",{value:"x"});var g=Object.defineProperties}catch(h){"__defineGetter__"in Object&&(f=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},g=function(a,b){for(var c in b)b.hasOwnProperty(c)&&f(a,c,b[c]);return a})}return!g&&window.VBArray&&(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),g=function(a,c,d){a=d.slice(0),a.push("hasOwnProperty");var e="VBClass"+setTimeout("1"),f={},g=[];g.push("Class "+e,"	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function"),_.forEach(a,function(a){f[a]!==!0&&(f[a]=!0,g.push("	Public ["+a+"]"))});for(var h in c)f[h]=!0,g.push("	Public Property Let ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Set ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Get ["+h+"]","	On Error Resume Next","		Set["+h+'] = [__proxy__]([__data__],"'+h+'")',"	If Err.Number <> 0 Then","		["+h+'] = [__proxy__]([__data__],"'+h+'")',"	End If","	On Error Goto 0","	End Property");return g.push("End Class"),g.push("Function "+e+"Factory(a, b)","	Dim o","	Set o = (New "+e+")(a, b)","	Set "+e+"Factory = o","End Function"),window.parseVB(g.join("\r\n")),window[e+"Factory"](c,b)}),window.PropertyFactory=a,a});