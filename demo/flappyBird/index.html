<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="user-scalable=no, width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1, maximum-scale=1" />
<title>flappyBird</title>

<style type="text/css">

    html,body{ margin:0; padding:0; height:100%;}
    //canvas {background:#999}
</style>

<script type="text/javascript" src="http://g.tbcdn.cn/kissy/k/1.3.1/seed-min.js"></script>
<script type="text/javascript" src="../../canvax/library/flashCanvas/flashcanvas.js"></script> 

</head>

<body>
   <script>
   KISSY.ready(function(){
       KISSY.config({
           debug:true,
           //base : "./",
           packages:[
             {
               name : "canvax",
               path : "../../"
             },
             {
               name : "demo",
               path : "../../"
             }
           ] 
       });

       var files = [ "bg.png" , "flappy_packer.png" , "ground.png" ];

       KISSY.use("canvax/ , canvax/library/stats , demo/flappyBird/ , node" , function( S , Canvax , Stats , GameApp ){
           var stats = new Stats();
           stats.setMode( 0 ); // 0: fps, 1: ms

           // Align top-left
           stats.domElement.style.position = 'absolute';
           stats.domElement.style.left = '0px';
           stats.domElement.style.top = '0px';

           document.body.appendChild( stats.domElement );

           var fileloader = new Canvax.Utils.ImagesLoader( files );
           fileloader.on("success" , function( e ) {
               window.app = new GameApp( S.all("#flappyBird") , e.images );
               app.canvax.on("beginRender" , function(){
                   //console.log( "beginRender" )
                   stats.begin();
               });

               app.canvax.on("afterRender" , function(){
                   //console.log( "afterRender" )
                   stats.end();
               });


           });

           fileloader.start();
           
       })
   }) 
   </script>
   <div id="flappyBird" style='width:320px;height:480px;'></div>
</body>
</html>

