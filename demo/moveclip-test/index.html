<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="user-scalable=no, width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1, maximum-scale=1" />
<title>Canvax</title>

<style type="text/css">
    body{margin:0;padding:0;font-size:12px;background-color:#eee;padding:10px 100px 100px;}
    //canvas {background:#999}
</style>

<script type="text/javascript" src="http://g.tbcdn.cn/kissy/k/1.3.1/seed-min.js"></script>
<script type="text/javascript" src="../../canvax/library/underscore.js"></script>

<script type="text/javascript" src="../../canvax/library/flashCanvas/flashcanvas.js"></script>
</head>

<body>
    <div id="ready"></div>
   <script>
   KISSY.ready(function(){
       KISSY.config({
           debug:true,
           //base : "./",
           packages:[
             {
               name : "canvax",
               path : "../../../canvax"
             }
             ,
             {
               name : "demo",
               path : "../../"
             }
           ]
       });

       var colorInd=0;
       window.stage=null;

       KISSY.use("canvax/ , canvax/utils/color,node" , function( S ,Canvax, color ){
           

           var box = S.one("#canvasTest");
           var width = box.width();
           var height = box.height();

           
           var canvax = new Canvax({
              id : "canvax",
              el : box
           });


           
           window.stage = new Canvax.Display.Stage({
               id : "chart",
               context:{
                 width : width,
                 height: height
               }
           });

           window.mclip = new Canvax.Display.Moveclip({
               context : {
                  x:100,
                  y:100,
                  width:100,
                  height:100
               }
           });

           mclip.setFrameRate(5)

           stage.addChild(mclip);



           canvax.addChild(stage);

           
           var circle = new Canvax.Shapes.Circle({
               //type : 'Circle',
               context : {
                   x:50,
                   y:50,
                   r : 50,
                   fillStyle : 'rgba(220, 20, 60, 0.8)',          // rgba supported
                   strokeStyle : color.getColor(colorInd++),  // getColor from default palette
                   lineWidth : 5
                   //lineType  : "dashed"
               }
           });
           
           var circle1 = new Canvax.Shapes.Circle({
               //type : 'Circle',
               context : {
                   x:150,
                   y:150,
                   r : 50,
                   fillStyle : 'rgba(220, 20, 60, 0.8)',          // rgba supported
                   strokeStyle : color.getColor(colorInd++),  // getColor from default palette
                   lineWidth : 5
                   //lineType  : "dashed"
               }
           });

           var rect = new Canvax.Shapes.Rect({
               id : "rect",
               context : {

                   x  :0,
                   y  :0,
                   width : 100,
                   height:100,
                   cursor:"pointer",
                   fillStyle:color.getColor(colorInd++)
               }
           });

           var img = new Image();
           img.onload = function(){
               var bitmap = new Canvax.Display.Bitmap({
                   img     : img,
                   context : {
                       x   : 0,
                       y   : 0
                   }
               });
               mclip.addChild(bitmap);
           }
           img.src = 'http://img5.douban.com/spic/s27159518.jpg';

           mclip.addChild(rect);

           mclip.addChild(circle);

           stage.addChild(circle1);

           S.one("#stop").on("click" , function(){
               mclip.stop();
           });

           S.one("#play").on("click" , function(){
               mclip.play();
           });




       })
   }) 
   </script>


   <div>
      <input type="button" id="stop" value="stop" />
      <input type="button" id="play" value="play" />
   </div>
   
   <div id="canvasTest" style='background:#f3f5f4;width:800px;height:800px;'></div>
</body>
</html>
